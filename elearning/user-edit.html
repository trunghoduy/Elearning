<!DOCTYPE html>
<html>

<head>
<meta charset="UTF-8">
<title>Sửa thành viên</title>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="./lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href='./css/style.css'>
</head>

<body>

	<div class="d-flex justify-content-between">
		<!-- SIDE BAR -->
		<div id="side-bar">
			<div class="logo">ADMIN PAGE</div>
			<ul class="list-group rounded-0">
				<li class="dashboard">DASHBOARD</li>
                <li>
                    <a href="user-list.html">
                        <i class="fa fa-user mr-2"></i> Quản lý thành viên
                    </a>
                </li>
                <li>
                    <a href="role-list.html">
                        <i class="fa fa-book mr-2"></i> Quản lý quyền
                    </a>
                </li>
				<li><a href="#"> <i class="fa fa-cogs mr-2"></i> Cấu hình
						hệ thống
				</a></li>
				<li><a href="#"> <i class="fa fa-slack mr-2"></i> Thông tin
						khác
				</a></li>
			</ul>
		</div>

		<div id="admin-wrapper">
			<!-- HEADER -->
			<nav class="navbar navbar-expand-sm navbar-light bg-light w-100">
				<a class="navbar-brand" href="#"><i class="fa fa-align-justify"></i></a>
				<button class="navbar-toggler d-lg-none" type="button"
					data-toggle="collapse" data-target="#collapsibleNavId"
					aria-controls="collapsibleNavId" aria-expanded="false"
					aria-label="Toggle navigation"></button>
				<div class="collapse navbar-collapse" id="collapsibleNavId">
					<ul class="navbar-nav ml-auto mt-2 mt-lg-0">
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" href="#" id="dropdownId"
							data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Cybersoft </a>
							<div class="dropdown-menu dropdown-menu-right"
								aria-labelledby="dropdownId">
                                <a class="dropdown-item" href="index.html">Trang chủ</a>
								<a class="dropdown-item" href="profile.html">Thông tin cá nhân</a> <a
									class="dropdown-item" href="#">Cài đặt</a> <a
									class="dropdown-item" href="index.html" onclick={logout()} >Thoát</a>
							</div></li>
					</ul>
				</div>
			</nav>

			<!-- CONTENT -->
            <section id="admin-content" class="p-3">
                <h3 class="mb-4"> Chỉnh sửa thông tin thành viên</h3>
                <form method="post" action="">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Email</label>
                                <input id="email" type="text" name="email" class="form-control" placeholder="email" />
                            </div>
                            <div class="form-group">
                                <label>Họ tên</label>
                                <input id="fullname" type="text" name="fullname" class="form-control" placeholder="fullname" />
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Số điện thoại</label>
                                <input id="phone" type="text" name="phone" class="form-control" placeholder="phone" />
                            </div>
                            <div class="form-group">
                                <label>Địa chỉ</label>
                                <input id="address" type="text" name="address" class="form-control" placeholder="address" />
                            </div>
                            <div class="form-group">
                                 <form >
                               <label>Loại người dùng</label>
                                <select id="role_id" name="role_id" class="form-control" placeholder="user" >
                                    <option value="">select</option>
                                    <option value="1">admin</option>
                                    <option value="2">teacher</option>
                                    <option value="3">student</option>
                                </select>
                                </form>
                            </div>
                        </div>
                        <div class="col-12 mt-3">
                            <button type="button" class="btn btn-success" id="edit" onclick="editUser(localStorage.getItem('id'))">Lưu lại</button>
                            <a class="btn btn-secondary" href="user-list.html">Quay lại</a>
                        </div>
                    </div>
                </form>
            </section>
		</div>
	</div>
	<script src="./js/jquery.slim.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/user.js">  </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.js"
        integrity="sha512-otOZr2EcknK9a5aa3BbMR9XOjYKtxxscwyRHN6zmdXuRfJ5uApkHB7cz1laWk2g8RKLzV9qv/fl3RPwfCuoxHQ=="
        crossorigin="anonymous"></script>
    <script>

window.addEventListener("load", function (event) {
            
           
    axios({
        url: 'http://localhost:2404/api/admin/user/edit/'+localStorage.getItem("id"),
        method: 'GET',
       
        headers:{'Authorization': 'Bearer '+localStorage.getItem("acesssToken")}
       
       
    })
    .then(function(res){
        console.log(res.data);
        document.getElementById('email').value=res.data.email;
       // document.getElementById('password').value=res.data.password;
        document.getElementById('fullname').value=res.data.fullname;
        document.getElementById('phone').value=res.data.phone;
        document.getElementById('address').value=res.data.address;
        document.getElementById('role_id').value=res.data.role_id;    
    })
    .catch(function(err){
        console.log(err)
    })
        },
        );
        var logout = function () {
           localStorage.removeItem("acesssToken");
           refresh();
       
        }

        function refresh() {
            setTimeout(function () {
                location.reload()
            },100)
        }
    </script>
</body>

</html>